{
  "version": 3,
  "sources": ["../../src/js/data.ts", "../../src/js/dice.ts", "../../src/js/engine.ts", "../../src/js/app.ts"],
  "sourcesContent": ["// Character and Creature Data\n\nimport type {\n  Character,\n  CharacterType,\n  CharacterTypeDefinition,\n} from './types';\n\n// Character type definitions with bonuses\nexport const CHARACTER_TYPE_DEFINITIONS: Record<\n  CharacterType,\n  CharacterTypeDefinition\n> = {\n  human: {\n    name: 'Human',\n    adjustments: {\n      adjacentDamage: 3,\n    },\n  },\n  elf: {\n    name: 'Elf',\n    adjustments: {\n      closeQuartersAttack: 3,\n    },\n  },\n  halfling: {\n    name: 'Halfling',\n    adjustments: {\n      closeQuartersAttack: 3,\n    },\n  },\n  dwarf: {\n    name: 'Dwarf',\n    adjustments: {\n      closeQuartersAttack: 2,\n      adjacentDamage: 3,\n    },\n  },\n  thief: {\n    name: 'Thief',\n    adjustments: {\n      closeQuartersAttack: 3,\n    },\n  },\n  zombie: {\n    name: 'Zombie',\n    adjustments: {},\n  },\n  tiger: {\n    name: 'Tiger',\n    adjustments: {},\n  },\n  dragon: {\n    name: 'Dragon',\n    adjustments: {},\n  },\n  other: {\n    name: 'Other',\n    adjustments: {},\n  },\n};\n\nexport const CHARACTERS: Character[] = [\n  {\n    name: 'Thora',\n    type: 'dwarf',\n    strength: 17,\n    baseDexterity: 11,\n    maxLifeForce: 21,\n    adjacentWeapon: { name: 'Steel Sword', type: 'sword', power: 10 },\n    closeWeapon: { name: 'Iron Dagger', type: 'dagger', power: 5 },\n    armor: { name: 'Leather Armor', strength: 1, dexterityPenalty: 1 },\n  },\n  {\n    name: 'Stilbo',\n    type: 'halfling',\n    strength: 10,\n    baseDexterity: 16,\n    maxLifeForce: 26,\n    adjacentWeapon: { name: 'Iron Sword', type: 'sword', power: 6 },\n    closeWeapon: { name: 'Iron Dagger', type: 'dagger', power: 6 },\n    armor: { name: 'Leather Armor', strength: 1, dexterityPenalty: 1 },\n  },\n  {\n    name: 'Huan',\n    type: 'elf',\n    strength: 16,\n    baseDexterity: 11,\n    maxLifeForce: 16,\n    adjacentWeapon: { name: 'Iron Sword', type: 'sword', power: 8 },\n    closeWeapon: { name: 'Steel Dagger', type: 'dagger', power: 9 },\n    armor: { name: 'Leather Armor', strength: 1, dexterityPenalty: 1 },\n  },\n  {\n    name: 'Bairam Medio',\n    type: 'human',\n    strength: 14,\n    baseDexterity: 14,\n    maxLifeForce: 14,\n    adjacentWeapon: { name: 'Iron Sword', type: 'sword', power: 7 },\n    closeWeapon: { name: 'Iron Dagger', type: 'dagger', power: 6 },\n    armor: null,\n  },\n];\n\nexport const CREATURES: Character[] = [\n  {\n    name: 'Jami',\n    type: 'thief',\n    strength: 13,\n    baseDexterity: 15,\n    maxLifeForce: 14,\n    adjacentWeapon: { name: 'Iron Sword', type: 'sword', power: 5 },\n    closeWeapon: { name: 'Steel Dagger', type: 'dagger', power: 7 },\n    armor: { name: 'Leather Armor', strength: 1, dexterityPenalty: 1 },\n  },\n  {\n    name: 'Small Zombie',\n    type: 'zombie',\n    strength: 14,\n    baseDexterity: 8,\n    maxLifeForce: 14,\n    adjacentWeapon: { name: 'Nails', type: 'nails', power: 4 },\n    closeWeapon: { name: 'Teeth', type: 'teeth', power: 6 },\n    armor: null,\n  },\n  {\n    name: 'Tiger',\n    type: 'tiger',\n    strength: 12,\n    baseDexterity: 12,\n    maxLifeForce: 13,\n    adjacentWeapon: { name: 'Claws', type: 'claws', power: 8 },\n    closeWeapon: { name: 'Teeth', type: 'teeth', power: 8 },\n    armor: { name: 'Thick Hide', strength: 1, dexterityPenalty: 0 },\n  },\n  {\n    name: 'Very Young Dragon',\n    type: 'dragon',\n    strength: 14,\n    baseDexterity: 13,\n    maxLifeForce: 15,\n    adjacentWeapon: { name: 'Claws', type: 'claws', power: 8 },\n    closeWeapon: { name: 'Teeth', type: 'teeth', power: 8 },\n    armor: { name: 'Thick Hide', strength: 2, dexterityPenalty: 0 },\n  },\n];\n", "// Dice rolling utilities\n\nexport function roll(min: number, max: number): number {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nexport function d20(): number {\n  return roll(1, 20);\n}\n", "// Combat Engine\n\nimport type { Character, Combatant, Weapon } from './types';\nimport { d20, roll } from './dice';\nimport { CHARACTER_TYPE_DEFINITIONS } from './data';\n\nconst MAX_INITIATIVE_RETRIES = 10;\n\nexport type Range = 'adjacent' | 'close_quarters';\nexport type Turn = 'player' | 'enemy';\nexport type Victor = 'player' | 'enemy' | 'fled' | null;\n\nexport interface CombatState {\n  player: Combatant | null;\n  enemy: Combatant | null;\n  range: Range;\n  currentTurn: Turn | null;\n  playerGoesFirst: boolean;\n  combatLog: string[];\n  isGameOver: boolean;\n  victor: Victor;\n  turnCount: number;\n  initiativeRetries: number;\n}\n\n// Mutable combat state\nexport const combatState: CombatState = {\n  player: null,\n  enemy: null,\n  range: 'adjacent',\n  currentTurn: null,\n  playerGoesFirst: false,\n  combatLog: [],\n  isGameOver: false,\n  victor: null,\n  turnCount: 0,\n  initiativeRetries: 0,\n};\n\n// Initialize a combatant from character data\nfunction initializeCombatant(data: Character): Combatant {\n  const combatant: Combatant = {\n    ...data,\n    currentLifeForce: data.maxLifeForce,\n    isUnconscious: false,\n    lastAction: null,\n    effectiveDexterity: 0,\n    isWeak: false,\n    isTackled: false,\n  };\n\n  const armorPenalty = combatant.armor?.dexterityPenalty ?? 0;\n  combatant.effectiveDexterity = combatant.baseDexterity - armorPenalty;\n\n  return combatant;\n}\n\n// Initialize combat with player and enemy\nexport function initCombat(player: Character, enemy: Character): void {\n  combatState.player = initializeCombatant(player);\n  combatState.enemy = initializeCombatant(enemy);\n  combatState.range = 'adjacent';\n  combatState.currentTurn = null;\n  combatState.playerGoesFirst = false;\n  combatState.combatLog = [];\n  combatState.isGameOver = false;\n  combatState.victor = null;\n  combatState.turnCount = 0;\n  combatState.initiativeRetries = 0;\n}\n\n// Get current weapon based on combat range\nexport function getCurrentWeapon(combatant: Combatant): Weapon {\n  if (combatState.range === 'close_quarters') {\n    return combatant.closeWeapon;\n  }\n  return combatant.adjacentWeapon;\n}\n\n// Initiative roll\nexport function rollInitiative(): void {\n  if (!combatState.player || !combatState.enemy) return;\n\n  const playerRoll = d20();\n  const enemyRoll = d20();\n  const playerTotal = playerRoll + combatState.player.effectiveDexterity;\n  const enemyTotal = enemyRoll + combatState.enemy.effectiveDexterity;\n\n  log(\n    `${combatState.player.name} rolled initiative: ${playerTotal} (1d20: ${playerRoll} + DEX: ${combatState.player.effectiveDexterity})`,\n  );\n  log(\n    `${combatState.enemy.name} rolled initiative: ${enemyTotal} (1d20: ${enemyRoll} + DEX: ${combatState.enemy.effectiveDexterity})`,\n  );\n\n  if (playerTotal > enemyTotal) {\n    combatState.playerGoesFirst = true;\n    combatState.currentTurn = 'player';\n    log(`${combatState.player.name} goes first!`);\n  } else if (enemyTotal > playerTotal) {\n    combatState.playerGoesFirst = false;\n    combatState.currentTurn = 'enemy';\n    log(`${combatState.enemy.name} goes first!`);\n  } else {\n    // Tie - re-roll\n    combatState.initiativeRetries++;\n\n    if (combatState.initiativeRetries >= MAX_INITIATIVE_RETRIES) {\n      log(\n        `Tie! Maximum retries reached (${MAX_INITIATIVE_RETRIES}). Randomly determining initiative...`,\n      );\n      // Break tie randomly\n      if (Math.random() < 0.5) {\n        combatState.playerGoesFirst = true;\n        combatState.currentTurn = 'player';\n        log(`${combatState.player.name} goes first!`);\n      } else {\n        combatState.playerGoesFirst = false;\n        combatState.currentTurn = 'enemy';\n        log(`${combatState.enemy.name} goes first!`);\n      }\n    } else {\n      log('Tie! Re-rolling initiative...');\n      rollInitiative();\n      return;\n    }\n  }\n  log('---');\n}\n\n// Switch turns\nexport function nextTurn(): void {\n  // Clear any tackled status\n  if (combatState.player) combatState.player.isTackled = false;\n  if (combatState.enemy) combatState.enemy.isTackled = false;\n\n  combatState.currentTurn =\n    combatState.currentTurn === 'player' ? 'enemy' : 'player';\n  combatState.turnCount++;\n}\n\n// Get character type adjustments\nfunction getAttackBonus(combatant: Combatant): number {\n  const typeDef = CHARACTER_TYPE_DEFINITIONS[combatant.type];\n\n  if (combatState.range === 'close_quarters') {\n    return typeDef.adjustments.closeQuartersAttack ?? 0;\n  } else {\n    return typeDef.adjustments.adjacentAttack ?? 0;\n  }\n}\n\nfunction getDamageBonus(combatant: Combatant): number {\n  const typeDef = CHARACTER_TYPE_DEFINITIONS[combatant.type];\n\n  if (combatState.range === 'close_quarters') {\n    return typeDef.adjustments.closeQuartersDamage ?? 0;\n  } else {\n    return typeDef.adjustments.adjacentDamage ?? 0;\n  }\n}\n\n// Attack action\nexport function attack(\n  attacker: Combatant,\n  defender: Combatant,\n  isDefending: boolean,\n): boolean {\n  if (!combatState.player || !combatState.enemy) return false;\n\n  const attackerName =\n    attacker === combatState.player\n      ? combatState.player.name\n      : combatState.enemy.name;\n  const defenderName =\n    defender === combatState.player\n      ? combatState.player.name\n      : combatState.enemy.name;\n  const weapon = getCurrentWeapon(attacker);\n\n  log(`${attackerName}'s Turn`);\n  log(`${attackerName} attacks with ${weapon.name}!`);\n\n  // Check if defender is unconscious (auto-hit)\n  if (defender.isUnconscious) {\n    log(`${defenderName} is unconscious and cannot defend!`);\n    const damage = calculateDamage(attacker, defender);\n    applyDamage(defender, damage);\n    return true;\n  }\n\n  // To-hit roll (opposed)\n  const attackBonus = getAttackBonus(attacker);\n  const attackerRoll = d20();\n  const attackerTotal =\n    attackerRoll + attacker.effectiveDexterity + attackBonus;\n\n  const defenderBonus = isDefending ? 5 : 0;\n  const defenderPenalty = defender.isTackled ? -5 : 0;\n  const defenderRoll = d20();\n  const defenderTotal =\n    defenderRoll +\n    defender.effectiveDexterity +\n    defenderBonus +\n    defenderPenalty;\n\n  log(\n    `Attack roll: ${attackerTotal} (1d20: ${attackerRoll} + DEX: ${attacker.effectiveDexterity}${attackBonus > 0 ? ` + Bonus: ${attackBonus}` : ''})`,\n  );\n  log(\n    `Defense roll: ${defenderTotal} (1d20: ${defenderRoll} + DEX: ${defender.effectiveDexterity}${defenderBonus > 0 ? ` + Defend: ${defenderBonus}` : ''}${defenderPenalty < 0 ? ` - Tackled: ${Math.abs(defenderPenalty)}` : ''})`,\n  );\n\n  if (attackerTotal > defenderTotal) {\n    log(`Hit! ${attackerName} lands a blow!`);\n    const damage = calculateDamage(attacker, defender);\n    applyDamage(defender, damage);\n    return true;\n  } else {\n    log(`Miss! ${defenderName} dodges the attack!`);\n    return false;\n  }\n}\n\n// Calculate damage\nfunction calculateDamage(attacker: Combatant, defender: Combatant): number {\n  const weapon = getCurrentWeapon(attacker);\n\n  // Apply weakness penalty\n  const effectiveStrength = attacker.isWeak\n    ? Math.max(1, attacker.strength - 3)\n    : attacker.strength;\n  const strRoll = roll(1, effectiveStrength);\n\n  const damageBonus = getDamageBonus(attacker);\n\n  const rawDamage = strRoll + weapon.power + damageBonus;\n  const armorStrength = defender.armor?.strength ?? 0;\n  const finalDamage = Math.max(0, rawDamage - armorStrength);\n\n  const parts: string[] = [];\n  parts.push(`STR: ${strRoll}`);\n  parts.push(`Weapon: ${weapon.power}`);\n  if (damageBonus > 0) parts.push(`Bonus: ${damageBonus}`);\n\n  let calculation = parts.join(' + ');\n  if (armorStrength > 0) {\n    calculation += ` - AC: ${armorStrength}`;\n  }\n\n  log(`Damage: ${finalDamage} (${calculation})`);\n\n  return finalDamage;\n}\n\n// Apply damage\nfunction applyDamage(target: Combatant, damage: number): void {\n  if (!combatState.player || !combatState.enemy) return;\n\n  const targetName =\n    target === combatState.player\n      ? combatState.player.name\n      : combatState.enemy.name;\n  const oldHP = target.currentLifeForce;\n  target.currentLifeForce = Math.max(0, target.currentLifeForce - damage);\n\n  if (damage === 0) {\n    log(`${targetName}'s armor absorbs all the damage!`);\n  } else {\n    log(\n      `${targetName} takes ${damage} damage! (${oldHP} \u2192 ${target.currentLifeForce} HP)`,\n    );\n  }\n\n  // Update status\n  updateCombatantStatus(target);\n\n  // Check for defeat\n  if (target.currentLifeForce === 0) {\n    log(`${targetName} is defeated!`);\n    endCombat(target === combatState.player ? 'enemy' : 'player');\n  }\n}\n\n// Update combatant status\nfunction updateCombatantStatus(combatant: Combatant): void {\n  if (!combatState.player || !combatState.enemy) return;\n\n  const targetName =\n    combatant === combatState.player\n      ? combatState.player.name\n      : combatState.enemy.name;\n\n  // Check unconscious\n  const unconsciousThreshold = Math.floor(combatant.maxLifeForce * 0.1);\n  const wasUnconscious = combatant.isUnconscious;\n  combatant.isUnconscious =\n    combatant.currentLifeForce <= unconsciousThreshold &&\n    combatant.currentLifeForce > 0;\n\n  if (combatant.isUnconscious && !wasUnconscious) {\n    log(`${targetName} falls unconscious!`);\n  }\n\n  // Check weak\n  const wasWeak = combatant.isWeak;\n  combatant.isWeak = combatant.currentLifeForce < combatant.maxLifeForce * 0.5;\n\n  if (combatant.isWeak && !wasWeak) {\n    log(`${targetName} is feeling weak...`);\n  }\n}\n\n// Defend action\nexport function defend(defender: Combatant): void {\n  if (!combatState.player || !combatState.enemy) return;\n\n  const defenderName =\n    defender === combatState.player\n      ? combatState.player.name\n      : combatState.enemy.name;\n  log(`${defenderName}'s Turn`);\n  log(`${defenderName} takes a defensive stance!`);\n  defender.lastAction = 'defend';\n}\n\n// Tackle/Wrestle action\nexport function tackle(attacker: Combatant, defender: Combatant): boolean {\n  if (!combatState.player || !combatState.enemy) return false;\n\n  const attackerName =\n    attacker === combatState.player\n      ? combatState.player.name\n      : combatState.enemy.name;\n  const defenderName =\n    defender === combatState.player\n      ? combatState.player.name\n      : combatState.enemy.name;\n\n  log(`${attackerName}'s Turn`);\n  log(`${attackerName} attempts to tackle ${defenderName}!`);\n\n  const attackerRoll = d20();\n  const attackerTotal = attackerRoll + attacker.effectiveDexterity;\n\n  const defenderRoll = d20();\n  const defenderTotal = defenderRoll + defender.effectiveDexterity;\n\n  log(\n    `Tackle roll: ${attackerTotal} (1d20: ${attackerRoll} + DEX: ${attacker.effectiveDexterity})`,\n  );\n  log(\n    `Resist roll: ${defenderTotal} (1d20: ${defenderRoll} + DEX: ${defender.effectiveDexterity})`,\n  );\n\n  if (attackerTotal > defenderTotal) {\n    defender.isTackled = true;\n    log(\n      `Success! ${attackerName} tackles ${defenderName} into close quarters!`,\n    );\n    combatState.range = 'close_quarters';\n    return true;\n  } else {\n    log(`Failed! ${defenderName} avoids the tackle!`);\n    return false;\n  }\n}\n\n// Disengage action\nexport function disengage(attacker: Combatant, defender: Combatant): boolean {\n  if (!combatState.player || !combatState.enemy) return false;\n\n  const attackerName =\n    attacker === combatState.player\n      ? combatState.player.name\n      : combatState.enemy.name;\n\n  log(`${attackerName}'s Turn`);\n  log(`${attackerName} attempts to disengage from close quarters!`);\n\n  const attackerRoll = d20();\n  const attackerTotal = attackerRoll + attacker.effectiveDexterity;\n\n  const defenderRoll = d20();\n  const defenderTotal = defenderRoll + defender.effectiveDexterity;\n\n  log(\n    `Disengage roll: ${attackerTotal} (1d20: ${attackerRoll} + DEX: ${attacker.effectiveDexterity})`,\n  );\n  log(\n    `Resist roll: ${defenderTotal} (1d20: ${defenderRoll} + DEX: ${defender.effectiveDexterity})`,\n  );\n\n  if (attackerTotal > defenderTotal) {\n    log(`Success! ${attackerName} breaks away to adjacent range!`);\n    combatState.range = 'adjacent';\n    return true;\n  } else {\n    log(`Failed! ${attackerName} remains in close quarters!`);\n    return false;\n  }\n}\n\n// Run away action\nexport function runAway(runner: Combatant): void {\n  if (!combatState.player || !combatState.enemy) return;\n\n  const runnerName =\n    runner === combatState.player\n      ? combatState.player.name\n      : combatState.enemy.name;\n  log(`${runnerName} flees from combat!`);\n  endCombat(runner === combatState.player ? 'fled' : 'player');\n}\n\n// Wake up attempt for unconscious\nexport function attemptWakeUp(combatant: Combatant): boolean {\n  if (!combatState.player || !combatState.enemy) return false;\n\n  const combatantName =\n    combatant === combatState.player\n      ? combatState.player.name\n      : combatState.enemy.name;\n  log(`${combatantName}'s Turn`);\n  log(`${combatantName} is unconscious...`);\n\n  const wakeRoll = d20();\n  log(`Wake-up roll: ${wakeRoll} (need 10+)`);\n\n  if (wakeRoll >= 10) {\n    combatant.isUnconscious = false;\n    log(`${combatantName} regains consciousness!`);\n    return true;\n  } else {\n    log(`${combatantName} remains unconscious.`);\n    return false;\n  }\n}\n\n// End combat\nfunction endCombat(victor: 'player' | 'enemy' | 'fled'): void {\n  if (!combatState.player || !combatState.enemy) return;\n\n  combatState.isGameOver = true;\n  combatState.victor = victor;\n  log('---');\n\n  if (victor === 'player') {\n    log(`VICTORY! ${combatState.player.name} wins!`);\n  } else if (victor === 'enemy') {\n    log(`DEFEAT! ${combatState.enemy.name} wins!`);\n  } else if (victor === 'fled') {\n    log(`${combatState.player.name} fled the battle!`);\n  }\n}\n\n// Logging\nfunction log(message: string): void {\n  combatState.combatLog.push(message);\n}\n", "// UI Controller\n\nimport type { Character, Combatant } from './types';\nimport { CHARACTERS, CREATURES } from './data';\nimport {\n  combatState,\n  initCombat,\n  rollInitiative,\n  attack,\n  defend,\n  tackle,\n  disengage,\n  runAway,\n  attemptWakeUp,\n  nextTurn,\n  getCurrentWeapon,\n} from './engine';\n\n// App state\ninterface AppState {\n  selectedCharacter: Character | null;\n  selectedCreature: Character | null;\n  isProcessing: boolean;\n}\n\nconst appState: AppState = {\n  selectedCharacter: null,\n  selectedCreature: null,\n  isProcessing: false,\n};\n\n// Calculate difficulty rating for creatures\nfunction getDifficulty(creature: Character): string {\n  const score =\n    creature.maxLifeForce + creature.strength + creature.baseDexterity;\n  if (score < 40) return 'Easy';\n  if (score < 50) return 'Medium';\n  return 'Hard';\n}\n\n// Render character selection cards\nfunction renderCharacterSelection(): void {\n  const grid = document.getElementById('character-grid');\n  if (!grid) return;\n\n  grid.innerHTML = '';\n\n  CHARACTERS.forEach((char, index) => {\n    const card = document.createElement('div');\n    card.className = 'selection-card';\n    card.dataset.index = index.toString();\n\n    const armorText = char.armor\n      ? `${char.armor.name} (${char.armor.strength})`\n      : 'None';\n\n    card.innerHTML = `\n      <h3>${char.name}</h3>\n      <div class=\"card-type\">${char.type}</div>\n      <div class=\"card-stats\">\n        <div class=\"stat-row\"><label>HP:</label> ${char.maxLifeForce}</div>\n        <div class=\"stat-row\"><label>STR:</label> ${char.strength}</div>\n        <div class=\"stat-row\"><label>DEX:</label> ${char.baseDexterity}</div>\n        <div class=\"stat-row\"><label>Weapon:</label> ${char.adjacentWeapon.name} (${char.adjacentWeapon.power})</div>\n        <div class=\"stat-row\"><label>Armor:</label> ${armorText}</div>\n      </div>\n    `;\n\n    card.addEventListener('click', () => selectCharacter(index));\n    grid.appendChild(card);\n  });\n}\n\n// Render creature selection cards\nfunction renderCreatureSelection(): void {\n  const grid = document.getElementById('creature-grid');\n  if (!grid) return;\n\n  grid.innerHTML = '';\n\n  CREATURES.forEach((creature, index) => {\n    const card = document.createElement('div');\n    card.className = 'selection-card';\n    card.dataset.index = index.toString();\n\n    const difficulty = getDifficulty(creature);\n    const armorText = creature.armor\n      ? `${creature.armor.name} (${creature.armor.strength})`\n      : 'None';\n\n    card.innerHTML = `\n      <h3>${creature.name}</h3>\n      <div class=\"card-type\">${creature.type} - ${difficulty}</div>\n      <div class=\"card-stats\">\n        <div class=\"stat-row\"><label>HP:</label> ${creature.maxLifeForce}</div>\n        <div class=\"stat-row\"><label>STR:</label> ${creature.strength}</div>\n        <div class=\"stat-row\"><label>DEX:</label> ${creature.baseDexterity}</div>\n        <div class=\"stat-row\"><label>Weapon:</label> ${creature.adjacentWeapon.name} (${creature.adjacentWeapon.power})</div>\n        <div class=\"stat-row\"><label>Armor:</label> ${armorText}</div>\n      </div>\n    `;\n\n    card.addEventListener('click', () => selectCreature(index));\n    grid.appendChild(card);\n  });\n}\n\n// Screen management\nfunction showScreen(screenId: string): void {\n  document.querySelectorAll('.screen').forEach((screen) => {\n    screen.classList.remove('active');\n  });\n  const targetScreen = document.getElementById(screenId);\n  if (targetScreen) {\n    targetScreen.classList.add('active');\n  }\n}\n\n// Select character\nfunction selectCharacter(index: number): void {\n  appState.selectedCharacter = CHARACTERS[index];\n  showScreen('creature-selection');\n}\n\n// Select creature and start combat\nfunction selectCreature(index: number): void {\n  appState.selectedCreature = CREATURES[index];\n  startCombat();\n}\n\n// Start combat\nfunction startCombat(): void {\n  if (!appState.selectedCharacter || !appState.selectedCreature) return;\n\n  initCombat(appState.selectedCharacter, appState.selectedCreature);\n  rollInitiative();\n\n  showScreen('combat-screen');\n  updateUI();\n  updateCombatLog();\n\n  // If enemy goes first, execute their turn after a delay\n  if (combatState.currentTurn === 'enemy') {\n    setTimeout(() => executeEnemyTurn(), 1000);\n  }\n}\n\n// Update UI\nfunction updateUI(): void {\n  if (!combatState.player || !combatState.enemy) return;\n\n  updateStats('player', combatState.player);\n  updateStats('enemy', combatState.enemy);\n  updateCombatState();\n  updateActionButtons();\n  updateTurnHighlight();\n}\n\n// Update combatant stats\nfunction updateStats(side: 'player' | 'enemy', combatant: Combatant): void {\n  const container = document.getElementById(`${side}-stats`);\n  if (!container) return;\n\n  const weapon = getCurrentWeapon(combatant);\n\n  const nameEl = container.querySelector('.stat-name');\n  const typeEl = container.querySelector('.stat-type');\n  if (nameEl) nameEl.textContent = combatant.name;\n  if (typeEl) typeEl.textContent = combatant.type;\n\n  // HP\n  const hpText = `${combatant.currentLifeForce}/${combatant.maxLifeForce}`;\n  const hpTextEl = container.querySelector('.hp-text');\n  if (hpTextEl) hpTextEl.textContent = hpText;\n\n  const hpPercent = (combatant.currentLifeForce / combatant.maxLifeForce) * 100;\n  const hpFill = container.querySelector('.hp-fill') as HTMLElement;\n  if (hpFill) {\n    hpFill.style.width = hpPercent + '%';\n\n    // HP bar color\n    hpFill.classList.remove('low', 'medium');\n    if (hpPercent <= 25) {\n      hpFill.classList.add('low');\n    } else if (hpPercent <= 50) {\n      hpFill.classList.add('medium');\n    }\n  }\n\n  // Stats\n  const strEl = container.querySelector('.stat-str');\n  if (strEl) strEl.textContent = combatant.strength.toString();\n\n  const armorPenalty = combatant.armor?.dexterityPenalty ?? 0;\n  const dexText =\n    armorPenalty > 0\n      ? `${combatant.effectiveDexterity} (${combatant.baseDexterity}-${armorPenalty})`\n      : combatant.effectiveDexterity.toString();\n  const dexEl = container.querySelector('.stat-dex');\n  if (dexEl) dexEl.textContent = dexText;\n\n  const weaponEl = container.querySelector('.stat-weapon');\n  if (weaponEl) weaponEl.textContent = `${weapon.name} (${weapon.power})`;\n\n  const armorStrength = combatant.armor?.strength ?? 0;\n  const armorName = combatant.armor?.name ?? 'None';\n  const armorEl = container.querySelector('.stat-armor');\n  if (armorEl) armorEl.textContent = `${armorName} (${armorStrength})`;\n\n  // Status\n  const statusDiv = container.querySelector('.stat-status');\n  if (statusDiv) {\n    statusDiv.classList.remove('normal', 'weak', 'unconscious');\n\n    if (combatant.isUnconscious) {\n      statusDiv.textContent = 'UNCONSCIOUS';\n      statusDiv.classList.add('unconscious');\n    } else if (combatant.isWeak) {\n      statusDiv.textContent = 'Feeling Weak';\n      statusDiv.classList.add('weak');\n    } else {\n      statusDiv.textContent = 'Normal';\n      statusDiv.classList.add('normal');\n    }\n  }\n}\n\n// Update combat state\nfunction updateCombatState(): void {\n  const rangeText =\n    combatState.range === 'close_quarters' ? 'Close Quarters' : 'Adjacent';\n  const rangeEl = document.getElementById('combat-range-text');\n  if (rangeEl) rangeEl.textContent = rangeText;\n\n  if (!combatState.enemy) return;\n  const turnText =\n    combatState.currentTurn === 'player'\n      ? 'YOUR TURN'\n      : `${combatState.enemy.name}'s Turn`;\n  const turnEl = document.getElementById('current-turn-text');\n  if (turnEl) turnEl.textContent = turnText;\n}\n\n// Update turn highlight\nfunction updateTurnHighlight(): void {\n  const playerStats = document.getElementById('player-stats');\n  const enemyStats = document.getElementById('enemy-stats');\n\n  if (playerStats) playerStats.classList.remove('active-turn');\n  if (enemyStats) enemyStats.classList.remove('active-turn');\n\n  if (combatState.currentTurn === 'player' && playerStats) {\n    playerStats.classList.add('active-turn');\n  } else if (enemyStats) {\n    enemyStats.classList.add('active-turn');\n  }\n}\n\n// Update action buttons\nfunction updateActionButtons(): void {\n  if (!combatState.player) return;\n\n  const actionsPanel = document.getElementById('actions-panel') as HTMLElement;\n  const attackBtn = document.getElementById(\n    'action-attack',\n  ) as HTMLButtonElement;\n  const defendBtn = document.getElementById(\n    'action-defend',\n  ) as HTMLButtonElement;\n  const tackleBtn = document.getElementById(\n    'action-tackle',\n  ) as HTMLButtonElement;\n  const disengageBtn = document.getElementById(\n    'action-disengage',\n  ) as HTMLButtonElement;\n  const runBtn = document.getElementById('action-run') as HTMLButtonElement;\n\n  // Disable all if not player's turn or game over\n  const isPlayerTurn =\n    combatState.currentTurn === 'player' && !combatState.isGameOver;\n  const isUnconscious = combatState.player.isUnconscious;\n\n  if (actionsPanel)\n    actionsPanel.style.opacity = isPlayerTurn && !isUnconscious ? '1' : '0.5';\n\n  if (attackBtn) attackBtn.disabled = !isPlayerTurn || isUnconscious;\n  if (defendBtn) defendBtn.disabled = !isPlayerTurn || isUnconscious;\n  if (runBtn) runBtn.disabled = !isPlayerTurn || isUnconscious;\n\n  // Show/hide tackle/disengage based on range\n  if (combatState.range === 'adjacent') {\n    if (tackleBtn) {\n      tackleBtn.classList.remove('hidden');\n      tackleBtn.disabled = !isPlayerTurn || isUnconscious;\n    }\n    if (disengageBtn) disengageBtn.classList.add('hidden');\n  } else {\n    if (tackleBtn) tackleBtn.classList.add('hidden');\n    if (disengageBtn) {\n      disengageBtn.classList.remove('hidden');\n      disengageBtn.disabled = !isPlayerTurn || isUnconscious;\n    }\n  }\n}\n\n// Update combat log\nfunction updateCombatLog(): void {\n  const logDiv = document.getElementById('combat-log');\n  if (!logDiv) return;\n\n  logDiv.innerHTML = '';\n\n  combatState.combatLog.forEach((message) => {\n    const line = document.createElement('div');\n\n    if (message === '---') {\n      line.className = 'separator';\n    } else if (\n      message.includes('VICTORY') ||\n      message.includes('DEFEAT') ||\n      message.includes('wins')\n    ) {\n      line.className = 'success';\n    } else if (message.includes('damage') || message.includes('takes')) {\n      line.className = 'damage';\n    } else if (message.includes('Turn')) {\n      line.className = 'important';\n    }\n\n    line.textContent = message;\n    logDiv.appendChild(line);\n  });\n\n  // Auto-scroll to bottom\n  logDiv.scrollTop = logDiv.scrollHeight;\n}\n\n// Player action\nasync function playerAction(action: string): Promise<void> {\n  if (!combatState.player || !combatState.enemy) return;\n  if (\n    appState.isProcessing ||\n    combatState.currentTurn !== 'player' ||\n    combatState.isGameOver\n  ) {\n    return;\n  }\n\n  appState.isProcessing = true;\n\n  // Check if unconscious\n  if (combatState.player.isUnconscious) {\n    attemptWakeUp(combatState.player);\n    updateCombatLog();\n    updateUI();\n    nextTurn();\n    appState.isProcessing = false;\n\n    setTimeout(() => executeEnemyTurn(), 1000);\n    return;\n  }\n\n  let performedAction = false;\n  const defender = combatState.enemy;\n  const wasDefending = defender.lastAction === 'defend';\n  defender.lastAction = null;\n\n  switch (action) {\n    case 'attack':\n      attack(combatState.player, defender, wasDefending);\n      performedAction = true;\n      break;\n\n    case 'defend':\n      defend(combatState.player);\n      combatState.player.lastAction = 'defend';\n      performedAction = true;\n      break;\n\n    case 'tackle': {\n      tackle(combatState.player, defender);\n      combatState.combatLog.push('---');\n      updateCombatLog();\n      updateUI();\n\n      const followUp = await promptFollowUpAction(['attack', 'defend']);\n      if (followUp === 'attack') {\n        attack(combatState.player, defender, wasDefending);\n      } else {\n        defend(combatState.player);\n        combatState.player.lastAction = 'defend';\n      }\n      performedAction = true;\n      break;\n    }\n\n    case 'disengage': {\n      disengage(combatState.player, defender);\n      combatState.combatLog.push('---');\n      updateCombatLog();\n      updateUI();\n\n      const followUp2 = await promptFollowUpAction(['attack', 'defend']);\n      if (followUp2 === 'attack') {\n        attack(combatState.player, defender, wasDefending);\n      } else {\n        defend(combatState.player);\n        combatState.player.lastAction = 'defend';\n      }\n      performedAction = true;\n      break;\n    }\n\n    case 'run':\n      runAway(combatState.player);\n      performedAction = true;\n      break;\n  }\n\n  if (performedAction) {\n    combatState.combatLog.push('---');\n    updateCombatLog();\n    updateUI();\n\n    // Check if game over\n    if (combatState.isGameOver) {\n      showGameOver();\n      appState.isProcessing = false;\n      return;\n    }\n\n    // Next turn\n    nextTurn();\n    updateUI();\n\n    appState.isProcessing = false;\n\n    // Enemy turn\n    setTimeout(() => executeEnemyTurn(), 1000);\n  } else {\n    appState.isProcessing = false;\n  }\n}\n\n// Prompt for follow-up action after maneuver\nfunction promptFollowUpAction(actions: string[]): Promise<string> {\n  return new Promise((resolve) => {\n    const originalButtons = {\n      attack: document.getElementById('action-attack') as HTMLButtonElement,\n      defend: document.getElementById('action-defend') as HTMLButtonElement,\n      tackle: document.getElementById('action-tackle') as HTMLButtonElement,\n      disengage: document.getElementById(\n        'action-disengage',\n      ) as HTMLButtonElement,\n      run: document.getElementById('action-run') as HTMLButtonElement,\n    };\n\n    // Temporarily modify buttons\n    const cleanup = () => {\n      Object.values(originalButtons).forEach((btn) => {\n        if (btn) btn.disabled = false;\n      });\n      if (originalButtons.tackle)\n        originalButtons.tackle.classList.remove('hidden');\n      if (originalButtons.disengage)\n        originalButtons.disengage.classList.add('hidden');\n    };\n\n    // Disable non-allowed actions\n    Object.keys(originalButtons).forEach((key) => {\n      const btn = originalButtons[key as keyof typeof originalButtons];\n      if (btn && !actions.includes(key)) {\n        btn.disabled = true;\n      }\n    });\n\n    const handler = (action: string) => {\n      cleanup();\n      resolve(action);\n    };\n\n    // Add one-time listeners\n    const attackHandler = () => handler('attack');\n    const defendHandler = () => handler('defend');\n\n    if (originalButtons.attack) {\n      originalButtons.attack.addEventListener('click', attackHandler, {\n        once: true,\n      });\n    }\n    if (originalButtons.defend) {\n      originalButtons.defend.addEventListener('click', defendHandler, {\n        once: true,\n      });\n    }\n  });\n}\n\n// Execute enemy turn\nfunction executeEnemyTurn(): void {\n  if (!combatState.player || !combatState.enemy) return;\n  if (combatState.isGameOver || combatState.currentTurn !== 'enemy') {\n    return;\n  }\n\n  // Check if unconscious\n  if (combatState.enemy.isUnconscious) {\n    attemptWakeUp(combatState.enemy);\n    combatState.combatLog.push('---');\n    updateCombatLog();\n    updateUI();\n    nextTurn();\n    updateUI();\n    return;\n  }\n\n  const action = getEnemyAction();\n  const defender = combatState.player;\n  const wasDefending = defender.lastAction === 'defend';\n  defender.lastAction = null;\n\n  setTimeout(() => {\n    if (!combatState.enemy || !combatState.player) return;\n\n    if (action === 'attack') {\n      attack(combatState.enemy, defender, wasDefending);\n    } else if (action === 'defend') {\n      defend(combatState.enemy);\n      combatState.enemy.lastAction = 'defend';\n    } else if (action === 'tackle') {\n      tackle(combatState.enemy, defender);\n      combatState.combatLog.push('---');\n      updateCombatLog();\n      updateUI();\n\n      setTimeout(() => {\n        if (!combatState.enemy || !combatState.player) return;\n        attack(combatState.enemy, defender, wasDefending);\n        finishEnemyTurn();\n      }, 800);\n      return;\n    } else if (action === 'disengage') {\n      disengage(combatState.enemy, defender);\n      combatState.combatLog.push('---');\n      updateCombatLog();\n      updateUI();\n\n      setTimeout(() => {\n        if (!combatState.enemy || !combatState.player) return;\n        attack(combatState.enemy, defender, wasDefending);\n        finishEnemyTurn();\n      }, 800);\n      return;\n    }\n\n    finishEnemyTurn();\n  }, 500);\n}\n\nfunction finishEnemyTurn(): void {\n  combatState.combatLog.push('---');\n  updateCombatLog();\n  updateUI();\n\n  if (combatState.isGameOver) {\n    showGameOver();\n    return;\n  }\n\n  nextTurn();\n  updateUI();\n}\n\n// Enemy AI\nfunction getEnemyAction(): string {\n  if (!combatState.enemy) return 'attack';\n\n  const rand = Math.random();\n\n  // 85% attack\n  if (rand < 0.85) {\n    return 'attack';\n  }\n\n  // 10% defend if weak\n  if (rand < 0.95 && combatState.enemy.isWeak) {\n    return 'defend';\n  }\n\n  // 5% tactical\n  if (combatState.range === 'adjacent') {\n    return 'tackle';\n  } else {\n    return 'disengage';\n  }\n}\n\n// Show game over\nfunction showGameOver(): void {\n  if (!combatState.player || !combatState.enemy) return;\n\n  const panel = document.getElementById('game-over-panel');\n  const title = document.getElementById('game-over-title') as HTMLElement;\n  const message = document.getElementById('game-over-message');\n\n  if (!panel || !title || !message) return;\n\n  if (combatState.victor === 'player') {\n    title.textContent = '\uD83C\uDF89 VICTORY! \uD83C\uDF89';\n    title.style.color = '#4caf50';\n    message.textContent = `${combatState.player.name} has defeated ${combatState.enemy.name}!`;\n  } else if (combatState.victor === 'enemy') {\n    title.textContent = '\uD83D\uDC80 DEFEAT \uD83D\uDC80';\n    title.style.color = '#f44336';\n    message.textContent = `${combatState.enemy.name} has defeated ${combatState.player.name}!`;\n  } else if (combatState.victor === 'fled') {\n    title.textContent = '\uD83C\uDFC3 FLED \uD83C\uDFC3';\n    title.style.color = '#ff9800';\n    message.textContent = `${combatState.player.name} fled from combat!`;\n  }\n\n  panel.classList.remove('hidden');\n}\n\n// Attach event listeners\nfunction attachEventListeners(): void {\n  const backBtn = document.getElementById('back-to-characters');\n  if (backBtn) {\n    backBtn.addEventListener('click', () => {\n      showScreen('character-selection');\n    });\n  }\n\n  const actionAttack = document.getElementById('action-attack');\n  if (actionAttack)\n    actionAttack.addEventListener('click', () => playerAction('attack'));\n\n  const actionDefend = document.getElementById('action-defend');\n  if (actionDefend)\n    actionDefend.addEventListener('click', () => playerAction('defend'));\n\n  const actionTackle = document.getElementById('action-tackle');\n  if (actionTackle)\n    actionTackle.addEventListener('click', () => playerAction('tackle'));\n\n  const actionDisengage = document.getElementById('action-disengage');\n  if (actionDisengage)\n    actionDisengage.addEventListener('click', () => playerAction('disengage'));\n\n  const actionRun = document.getElementById('action-run');\n  if (actionRun) actionRun.addEventListener('click', () => playerAction('run'));\n\n  const newCombatBtn = document.getElementById('new-combat-btn');\n  if (newCombatBtn) {\n    newCombatBtn.addEventListener('click', () => {\n      showScreen('character-selection');\n      appState.selectedCharacter = null;\n      appState.selectedCreature = null;\n    });\n  }\n}\n\n// Initialize app\nfunction init(): void {\n  renderCharacterSelection();\n  renderCreatureSelection();\n  attachEventListeners();\n}\n\n// Initialize app when DOM is ready\ndocument.addEventListener('DOMContentLoaded', () => {\n  init();\n});\n"],
  "mappings": "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",
  "names": []
}
